{% extends "admin/_layout.html" %}
{% block title %}Manage Events{% endblock %}

{% block admin_content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="mb-0">Events</h2>
  <a class="btn btn-success" href="{{ url_for('admin_events_new') }}">+ Add Event</a>
</div>

{% if events %}
  <div class="list-group list-group-flush">
    {% for e in events %}
      <div class="card gp-admin-list-item mb-2 shadow-sm p-3 d-flex justify-content-between align-items-center flex-row">
        <div>
          <div class="fw-bold">{{ e.title }}</div>
          <div class="text-muted small">
            {{ e.date.strftime('%Y-%m-%d') }}{% if e.location %} • {{ e.location }}{% endif %}
          </div>
        </div>
        <div class="d-flex gap-2">
          <a class="btn btn-outline-success btn-sm" href="{{ url_for('admin_events_edit', event_id=e.id) }}">Edit</a>

          <a class="btn btn-outline-light btn-sm"
             href="{{ url_for('admin_event_artists', event_id=e.id) }}">
             Artists
          </a>

          <a class="btn btn-outline-light btn-sm"
             href="{{ url_for('admin_event_media', event_id=e.id) }}">
             Media
          </a>



          <form method="POST" action="{{ url_for('admin_events_delete', event_id=e.id) }}"
                onsubmit="return confirm('Delete this event?');">
            <button class="btn btn-outline-danger btn-sm" type="submit">Delete</button>
          </form>
        </div>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p class="text-muted">No events yet. Click “Add Event”.</p>
{% endif %}
{% endblock %}
